{
  "variables": {
    "user_name": "{{user `user_name`}}",
    "ssh_password": "{{user `ssh_password`}}"
  },
 
  "builders": [
    {
      "type": "googlecompute",
      "disk_size": 200,
      "project_id": "hbl-dev-et-blr-prj-spk-5a",
      "network_project_id": "hbl-dev-host-prj-hub-5a",
      "subnetwork": "hbl-dev-asia-do-subnet",
      "service_account_email": "hbl-dev-monitor@hbl-dev-et-blr-prj-spk-5a.iam.gserviceaccount.com",
      "omit_external_ip": true,
      "zone": "asia-south1-a",
 
      "source_image": "rhel-9x-byos-golden-image-dev-april1-2025",
      "source_image_project_id": "custom-image",
      "source_image_family": "csyua-gcp-mumbai-dev",
 
      "tags": [
        "allow-vidi-ssh",
        "allow-zpa-ssh",
        "dev-ssh-allow"
      ],
 
      "ssh_username": "{{user `user_name`}}",
      "ssh_password": "{{user `ssh_password`}}",
 
      "machine_type": "n2d-standard-4",
 
      "image_name": "hbl-gcp-rhel-byob-gcp-mumbai-dev-packer-vb2024-v1-{{timestamp}}",
      "image_storage_locations": [
        "asia-south1"
      ],
 
      "kms_key_name": "projects/hbl-dev-et-blr-prj-spk-5a/locations/asia-south1/keyRings/mdm-dev-kr/cryptoKeys/mdm-dev-key"
    }
  ],
 
  "provisioners": [
    {
      "type": "ansible",
      "playbook_file": "/home/hdfcbank/yba/packer/yba_2024.yml",
      "extra_arguments": [
        "--vault-id=default@/home/hdfcbank/yba/packer/pass.txt"
      ],
      "ansible_env_vars": [
        "ANSIBLE_REMOTE_TMP=/tmp"
      ]
    }
  ]
}